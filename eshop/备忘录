没有做的:

     cookie的过期时间没有设定
     用户中心的三个页面的显示问题  高亮显示
     用户收货管理的展现和隐藏
     设定默认值后 跟新用户表中的信息  然后咱现在前端

问题:
    可以实现邮箱登陆 但是怎么实现使用电话号码登陆呢??

    什么加上了个 / 就带表的是 从根目录跳转 不加就道代表的是从当前目录进行重定向
        /user/login/  这个是在从根目录下跳转
        user/login/  这个是从当前的目录去跳转
       render 的时候 使用的是  user/login.html  这个代表的是在当前的目录去找的基础上去找这个文档

    要知道每个木块和类库是干嘛用的


    关于用户认证系统的使用  在后台登陆的时候怎么去获取session中的在,
    前端登陆的时候 可以自己去设定session的键,获取到没有问题 但是在后台登陆的时候 怎么去获取呢session中的信息
    这个认证系统存储的session的key是什么??


 疑问: 使用locals()函数 返回前端的信息 和直接采用 字典的形式返回的哪个效率好些 哪个是常用的

解决: 使用locals 函数 会自动构建一个上下文 会把当前视图函数中的变量全部返回 用不到的也会进行返回 使用字典
        的形式就是 只返回自己需要的  (返回了 不使用 不进行解析  有没有什么性能影响)

 问题:  内置的认证系统的流程  以及这个session的管理
        怎么实现点击编辑的时候 把值放回到莫泰对话框中

    too many values to unpack(except 2)
解答:
    遇到这个问题是因为在 使用get的时候 没有去指定get(email=email)参数的属性值
	    直接使用了get(email) 导致出错



经验总结:

    在设定邮箱注册的时候 要限制邮箱是唯一的 不能重复

    在数据库中 存储电话号码的时候不能执行整型的  只能使用 字符串形式的 因为整型长度是有限的

    在数据库执行删除操作的时候 是没有返回值的 删除一条数据 返回的是一个None

    在使用get获取的时候 没有的话 抛出异常  多个的话也抛出异常

    使用数据库的时候 使用filter 过滤没有的话 返回的是一个空的查询集

    在通过一个一类去给多类添加对象的时候 先要获取一个类的对象 然后把这个一类的对象添加到这儿多类中
        形成了 关联的操作  然后就可以给对象添加其他的属性了

    用户在编辑和修改自己的信息的时候 使用一个视图函数去执行的思路:
        在url中构造参数 在后台接收参数 根据参数去执行不同的操作 就去执行对应的函数

第一天 7-5:
     前端完成:

        用户模块的模板的抽取
        登陆 注册模块的模板的抽取

     未完成:

        登陆页面的js 前端没有

        暂留问题没有解决:
            后台返回的 err 错误 没有效果  自己设置的css 样式没有起作用

            在注册页面的时候 发送的ajax 请求 不能发送  程序 不能进入\(已经解决  get方法调用出错)

      问题: 在用户中心进行页面 跳转的时候 出现页面url的叠加  之前的是 在进行重重定向的时候 出现 是忘了加上/ 代表的是跟目录
            这次问题在哪里???? (我操 看错地方了 fuck)

     后台完成模块:

        用户的注册 验证 (暂缺发送邮箱进行验证模块的书写)

            前端: 使用jquery和正则表达式来验证注册的信息

            后台: 配置模板文件-->静态文件-->mysql数据库-->各种settings-->创建userapp-->创建user模型
                -->数据库迁移-->加入admin-->抽取模板-->编写视图函数--> 从数据库去数据进行页面的渲染
            主要知识点:
                  继承django的用户管理类 AbstractUser(需在settings中进行配置) 使用自定义的模块来管理用户信息
                 使用form表单来验证前端提交来的信息,
                 综合的使用 render redriect jsonresponse 来处理前端发起的ajax请求
                 使用类和对象的形式继承 from django.views.generic import View来代替一个个单一的函数
                 当用户的信息提交在后台验证出错的时候 使用 login_form.username.value 来获取提交来的值 然后进行回显

         解决问题:解决了继承AbstractUser 模块不能是用户的注册密码加密的问题(解决方法详见笔记)
                 解决了使用choice的时候类型出错(需要注意choice中的参数 要和定义的模型的参数类型一致的)

         新增知识点: 1 使用了django的内置加密和解密函数  make_password 和 check_password
                    2 在前端可以单独的获取到form表单中的出错的信息 {{login_form.errors.username.0 }} 获取表单验证
                        中字段声明的的第一个错误信息
                    3 使用静态文件上下文环境/和媒体文件上下文环境 从而在前端构建动态的路径



            优化点:(优化阶段放在项目整体框架搭建完成后) 删除前端繁琐的if else 判断语句 采用自定义模板标签的形式来完成功能



        用户的登陆验证

            后台: 使用form表单来验证前端提交来的信息, 使用django的用户验证 authentica 函数来完成 用户的验证
                  通过判断用户的状态user.is_active来调用 login 函数 完成用户的登陆 把用户的信息登陆到seesion中


        用户中心模块: 当用户来修改信息的时候 需要先获取到用的的id 这样当用户在修改信息的时候才能知道是在修改谁的
                    处理用户中心的时候  需要在登陆成功的时候 记住用户的唯一id 这个id是唯一的 能辨别用户在数据库中的信息
                    在用户中心通过这个id的值 取出来 用户的信息 然后返回给前端渲染


明天计划:
    完成邮箱发送 验证功能  书写 验证和忘记密码模块  发送成功模板
     完成用户中心的视图的渲染  建立 用户发货模型 构建 莫泰对话框 可以便于添加 用户的信息 可以让用户更爱自己的信息
     完成

     登陆验证思路:
        在用户登陆成功后把用户的信息存入到session中 在装饰器中去验证这session  没有就不能录
    退出
    商品的首页
    商品的列表页
    商品额详情页

7-6 完成:
    使用邮箱发送验证码: 配置发送邮箱的设置 书写 发送邮箱的 工具类
    邮箱验证模块:注册后使用邮箱进行验证  验证不通过不能登陆
    忘记密码模块:使用邮箱验证完成密码的重置功能
    邮箱验证没有问题:
    完成使用邮箱认证登陆系统
    用户中心切换:动态显示对应的高亮
    修改:用户地址管理页面 用户可以动态的管理自己的收获地址 : 使用莫泰对话框  加上 bootstrap 布局
    完成用户管理自己的收获地址的删除操作(删除成功后是返回的是None  真不友好)
    退出完成: 调用的django内部的logout 函数  登陆就使用的login函数

    简单的装饰器完成 但是还有待修改 加强


    遇到的问题:
        1
        在模板中 不能使用 模板函数中嵌套模板变量  这样就解析不出来  不能实现动态的判断是哪个界面了
         {#        <li><a href="{% url 'user:user_center_site' %}?url_id=3" {% if  "{{ url_id }}" == 3 %} class="active" {% endif %}>· 收货地址</a></li>#}

解答: 在方法块中  直接进行使用就可以 不用在加上两个大括号了



        2
        UserProfile matching query does not exist.
        退出后 就没有session 信息了
        从后台登陆的用户  前边在去获取session 就不能获取到了  从后登陆 然后去获取session的时候 不能获取的
            使用的是django的认证系统

         即便是从后台推出了 但是我的seesion  还是在的啊  也没有设置session过期 没有进行登陆校验 怎么回事????

        这里需要做验证 当用户退出的时候  就不能在不个人中心了 直接跳转到登陆页面 或者 首页  这样就不会出现 用户的
            queryset 不能获取到问题了
    3
     使用 内置的认证系统怎么判断 当前用户是否已经登陆


     这个改怎么使用
     编辑你的项目的settings.py文件，添加如下代码：

    from django.core.urlresolvers import reverse_lazy
    LOGIN_REDIRECT_URL = reverse_lazy('dashboard')
    LOGIN_URL = reverse_lazy('login')
    LOGOUT_URL = reverse_lazy('logout')
    这些设置的意义：

    LOGIN_REDIRECT_URL：告诉Django用户登录成功后如果contrib.auth.views.login视图（view）没有获取到next参数将会默认重定向到哪个URL。
    LOGIN_URL：重定向用户登录的URL（例如：使用login_required装饰器（decorator））。
    LOGOUT_URL：重定向用户登出的URL。

    4 编辑的时候 把用户的id的值展现在get 提交 安全??

解答: 构造url  不要显示的把你的id地址暴露在地址栏中  构造url的好处的就是 不能分辨你这个数字代表的是什么意思

    5 实现:设置客户的默认的收获地址的思路:
        需要解决的问题是: 怎么在弹出莫泰对话框的时候吧用户的信息给进行回显操作

解答:

        默认的收获地址放在客户的userprofiles 中 其他的收获地址 放在收获地址的model中 当点击设置为默认的守护地址时候
        发送一个ajax请求 把 userprofiles中的默认收获地址给替换掉

    6
    真对编辑和删除操作 的思路:
     把获取操作的这条信息的id 传递给后台 后台根据id值来进行判断 具体的是操作哪个数据 需不需要先去获取zhege
        信息所属的用户???

解答:  一定是需要的  这样才能确定你是要修改的是那个用户的操作 (把信息在数据库中对应的id的传递给后台  这个id是唯一的
这样就只能找到一个不会造成多删除的操作) (首先要去获取当前的用户 然后通过用户去找下面关联的所有对象 然后再根据id值来进行
有真对的删除)

经验小结:在通过一个一类去给多类添加对象的时候 先要获取一个类的对象 然后把这个一类的对象添加到这儿多类中
        形成了 关联的操作  然后就可以给对象添加其他的属性了

     用户在编辑和修改自己的信息的时候 使用一个视图函数去执行的思路:
        在url中构造参数 在后台接收参数 根据参数去执行不同的操作 就去执行对应的函数

     7
     使用method_de  怎么给类进行装饰 使用装饰器
     @method_decorator(check_auth)
     from django.contrib.auth.decorators import login_required
     from django.utils.decorators import method_decorator





7-7 号
    一定要话流程图  一定
     7-6号未完成的 :
        点击修改默认收获地址 到添加到最是上面去
        点击编辑 弹出莫泰对话框 回显用户的信息
        构造url  实现 一个视图函数 同时能处理 编辑和删除操作
        把get提交的url 换成构造新的url地址
         把下面的一堆收货信息 进行隐藏
         扩张用户列表中的功能  使用 bootstrap 实现
         看单选框都有什么操作
         实现全选 反选  全部删除 等操作

     明天计划完成的:
        修改水果列表  实现 组合搜素
            看 算法推荐  和视图 图片 缓存的功能
             用户认证系统的全面理解
             form类的使用


     $("input:radio[name='dialCheckResult']").change(function (){ //拨通
    alert(“123”);
    });


使用  $this的话 是选中的是 父级元素 下面的所有radio 对象  父下面的所有子对象 这样才有 $this 操作

7-7
    问题:
        没有新品推荐模块 按照添加的时间 来做新品推荐  (或者使用推荐算法来完成商品的推荐)
        没有用户评论 模块 需要自己实现
         对静态文件和媒体文件的处理  是不是都凡在static的下面呢??
         media_root  static_root
         问题: 怎么在构造了 url的时候还能取通过中间件来进行过滤
         使用values()  和

完成:
    验证用户登陆的装饰器,给需要进行登陆后才能去操作的页面进行装饰:
        实现流程:用户登陆的时候  把用户的id 和 用户名 信息写入的啊session中 在前端的模板中 通过
            使用request.session.id 来判断用户是否已经登陆 使用 request.session.user 来获取用户名
    用户注销登陆的操作:
        实现的流程:当用户点击注销的时候  就把用户存在session中的信息 进行删除  使用的是 request.session.flush
              flush() 方法会删除掉用户在session中的所有的信息  clear() 方法会清空掉session中的值 但是session_key
                还是存在的  查看django的logout()  也是使用的是 flush
    实现中间件来完成用户在哪个页面点击的登陆.登陆成功后 就跳转回那个页面"
        实现的流程:这个流程需要在请求url 之后 在视图函数之前  采用中间件来完成 使用的是 process_request
            方法 重写了 请求的对象  在请求后采用 request.path 来获取 url 并和需要跳转的url 列表进行对比判断
             存在的时候 才会去 保存在session中 (保存在session中 是因为这个时候还没有response对象(操作session需要使用
             response对象 (render 和 rediect 也是返回的response对象))),在登陆成功后通过request.session.get() 去进行
             获取到url 然后进行跳转,做好url判断 当没有url的时候 就跳转到首页


    新增知识点: 采用ajax提交去请求 获取 crsf 验证 通过属性input的name值 和name属性去获取到生成的验证码

    商品页面的处理:
         经验小结: 就是把查询出来的视图  放在列表中进行 当方式
        完成index页面的数据的渲染 ()